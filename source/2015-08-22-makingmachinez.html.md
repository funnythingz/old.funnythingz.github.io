---
title: 10年以上運用しているブログをmiddleman化するまでのお話
date: 2015-08-22 21:06 JST
tags:
- middleman
- blog
---

こんにちは、funnythingzです。夏が終わりますね。海も山も特に行ってません。夏らしいことは何もしてないで引きこもっています。

個人で10年以上運用している（放置している）[原付改造カスタムブログ::makingmachinez](http://www.makingmachinez.com/)という黒歴史満載の超ダサいブログがあるのですが、そのブログをmiddleman化したのでその経緯でも書いてみます。

## そもそもブログじゃなかった

2003年に開設したのですが、そもそも最初はブログというよりはただのホームページでした。

というかブログというものが一般的ではなくまだウェブログって呼ばれていた時代でした。

で、最初は当時学生だった僕の3DCG作品をのっけたり適当なポエム書いたりするようなスペースでした。

## サーバ構成や仕様など

気づいたら12年くらい運用（放置）しているのでサーバ構成とか仕様とかなんかそういうの書いてみます。

### リリース当時(2004 - 2006)

- 自宅サーバ (Redhat Linux 9)
- HTML (テーブルコーディング)

確かCSSが出てき始めたばっかりの頃だったと思います。で、`Redhat Linux 9でつくる最強自宅サーバ` みたいな本を買ってきてどうせなら自宅サーバつくって独自ドメインで公開したらカッコイイんじゃね？みたいなノリでサーバつくってリリースしたような気がします。学校の友達にDOS攻撃されてソッコーでダウンしたのは良い思い出です。

### Web標準時代 (2007 - 2008)

- 自宅サーバ (FedoreCore 3)
- XHTML + CSS (Web標準)

確かサーバ壊れて2006年に一回閉鎖して、そのあとしばらく放置して今度はFedoraCore3で自宅サーバつくって復活させたような気がしています。この頃の記憶が定かじゃないです。

で、2007年にCSSを覚えたので確かCSSもつかってWeb標準化したような気がします。この頃から放置気味だったのであまり覚えていません。

### MovableType (2009 - 2014)

- チカッパ -> ヘテムル -> さくらVPS
- MovableType v4.2 - v5.x

すべての記事を手動でHTML書いていたのでブログらしくブログ化しようと思ってMovableTypeを導入したような気がします。

もともと2007年頃からWordpressを使っていたのですが、あえてMovableTypeにしてみようと思って導入したような気がします。

サーバーはころころ変わっていて、ペパボのチカッパ、ヘテムルを経てさくらVPSで運用していました。

PVは全盛期で20,000/Monthありました。

### GitHub Pages (2014 - 2015)

- GitHub Pages

さくらVPSを解約するためにMovableTypeやめてどうしようかなーと思っていた時にGitHub Pagesで静的運用すれば良いんじゃないかと思い、MovableTypeで書きだしたHTMLをそのままリポジトリにあげてGitHub Pagesとして運用していました。

もはや完全に放置状態だったのであまりに運用が雑でひどすぎます。

それでもPVは10,000/Monthありました。だいぶゆるやかに減少傾向ですが…。

### middleman + GitHub Pages (2015 - )

このままでは改善も何もできないぞと思い、ようやく重い腰をあげてmiddleman化してみました。

このfunnythingzブログもmiddlemanで構築されているので個人的にmiddlemanが好きなのもあって頑張ってmiddleman化しました。

記事数が100記事くらいあるので静的なHTMLからどうやってmarkdownにしようかと、手動コピペも頑張ればいける量だったので手動でも良いかなとも思いましたが、そこはやはり変換スクリプトつくってやるべきだよなと思いrubyで変換スクリプト書きました。

記事構成が `/yyyy/mm/#{id}.html` だったので、これを `yyyy-mm-dd-id.html.md` に変換して記事の中身だけをスクレイピングするスクリプトを用意して変換しました。

## 所感

10年以上運用(放置)しているブログに手を入れるのはなかなか腰が重いですが、何とかmiddleman化できて満足しています。

デザインとかもがっつり変えちゃおうかなとも思ったのですが、それをやり始めると色々変えたくなって終わらないなと思ったのでまずはリファクタとしてmiddleman化しました。

ソーシャルボタンもいれてシェアもしやすくできたのが一番満足してるかもｗ

まぁそんなこんなでGitHub Pages上で運用すれば無料で運用し続けることができるのでまたさらに10年くらいは放置しても大丈夫かなｗ

そんな感じでゆるく運用していこうと思います。
